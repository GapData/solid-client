require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";module.exports={authEndpoint:"https://databox.me/",parser:"rdflib",proxyUrl:"https://databox.me/,proxy?uri={uri}",signupEndpoint:"https://solid.github.io/solid-idps/",signupWindowHeight:600,signupWindowWidth:1024,timeout:5e4};
},{}],2:[function(require,module,exports){
"use strict";function listen(){var n=new Promise(function(n,e){var i=window.addEventListener?"addEventListener":"attachEvent",t=window[i],o="attachEvent"===i?"onmessage":"message";t(o,function(i){var t=i.data;if("User:"===t.slice(0,5)){var o=t.slice(5,t.length);return o&&o.length>0&&"http"===o.slice(0,4)?n(o):e(o)}},!0)});return n}function login(n,e){var i=require("../config").authEndpoint;return n=n||window.location.origin+window.location.pathname,e=e||i,webClient.head(n).then(function(n){return n.isLoggedIn()?n.user:webClient.head(e).then(function(n){return n.user})})}function signup(n){var e=require("../config");n=n||e.signupEndpoint;var i=e.signupWindowWidth,t=e.signupWindowHeight,o=window.screen.width/2-(i/2+10),r=window.screen.height/2-(t/2+50),s="Solid signup",u=n+"?origin="+encodeURIComponent(window.location.origin),a="resizable,scrollbars,status,width="+i+",height="+t+",left="+o+",top="+r;return window.open(u,s,a),new Promise(function(n,e){listen().then(function(e){return n(e)})["catch"](function(n){return e(n)})})}module.exports.listen=listen,module.exports.login=login,module.exports.signup=signup;var webClient=require("./web");
},{"../config":1,"./web":13}],3:[function(require,module,exports){
"use strict";function appendGraph(r,a,e){var p=e?rdf.sym(e):void 0;a.statementsMatching(void 0,void 0,void 0,p).forEach(function(a){r.add(a.subject,a.predicate,a.object,a.why)})}function parseGraph(r,a,e){var p=rdf.graph();return rdf.parse(a,p,r,e),p}module.exports.appendGraph=appendGraph,module.exports.parseGraph=parseGraph;var rdf=require("./rdf-parser").rdflib;
},{"./rdf-parser":6}],4:[function(require,module,exports){
"use strict";function getProfile(e,r){return r=r||{},r.headers=r.headers||{Accept:"text/turtle"},webClient.get(e,r).then(function(t){var n=t.contentType();if(!n)throw new Error("Cannot parse profile without a Content-Type: header");var i=graphUtil.parseGraph(e,t.raw(),n),a=new SolidProfile(e,i,t);return loadExtendedProfile(a,r)})}function loadExtendedProfile(e,r){r=r||{},r.headers=r.headers||{Accept:"text/turtle"};var t=e.relatedProfilesLinks();return webClient.loadParsedGraphs(t,r).then(function(r){return r.forEach(function(r){r&&r.value&&e.appendFromGraph(r.value,r.uri)}),e})}function loadTypeRegistry(e,r){r=r||{},r.headers=r.headers||{Accept:"text/turtle"};var t=e.typeIndexes();return webClient.loadParsedGraphs(t,r).then(function(r){return r.forEach(function(r){r&&r.value&&e.addTypeRegistry(r.value)}),e})}function isPrivateTypeIndex(e){var r=rdf.sym(Vocab.SOLID.PrivateTypeIndex);return e.any(null,null,r,e.uri)}function isPublicTypeIndex(e){var r=rdf.sym(Vocab.SOLID.PublicTypeIndex);return e.any(null,null,r,e.uri)}module.exports.getProfile=getProfile,module.exports.loadExtendedProfile=loadExtendedProfile,module.exports.loadTypeRegistry=loadTypeRegistry,module.exports.isPrivateTypeIndex=isPrivateTypeIndex,module.exports.isPublicTypeIndex=isPublicTypeIndex;var graphUtil=require("./graph-util"),webClient=require("./web"),SolidProfile=require("./solid-profile"),rdf=require("./rdf-parser").rdflib,Vocab=require("./vocab");
},{"./graph-util":3,"./rdf-parser":6,"./solid-profile":7,"./vocab":10,"./web":13}],5:[function(require,module,exports){
"use strict";var lib=require("../package");module.exports.version=function(){return lib.version};
},{"../package":15}],6:[function(require,module,exports){
"use strict";var RDFParser={};"undefined"!=typeof $rdf?RDFParser.rdflib=$rdf:"undefined"!=typeof tabulator?RDFParser.rdflib=tabulator.rdf:"undefined"!=typeof window?RDFParser.rdflib=window.$rdf:(console.log("RDFParser.rdflib = require('rdflib')"),RDFParser.rdflib=require("rdflib")),module.exports=RDFParser;
},{"rdflib":undefined}],7:[function(require,module,exports){
"use strict";function SolidProfile(e,r,t){this.externalResources={inbox:null,storage:[],typeIndexes:[]},this.typeIndexPublic=rdf.graph(),this.typeIndexPrivate=rdf.graph(),this.parsedGraph=rdf.graph(),this.response=t,this.relatedProfiles={preferences:[],sameAs:[],seeAlso:[]},this.webId=null,e&&(this.baseProfileUrl=e.indexOf("#")>=0?e.slice(0,e.indexOf("#")):e,r&&(this.initWebId(r),this.appendFromGraph(r,this.baseProfileUrl)))}function extractWebId(e,r){var t=rdf.sym(e),i=rdf.sym(Vocab.FOAF.primaryTopic),s=r.any(t,i);return s}function parseLink(e,r,t,i,s){var o=e.any(r,t,i,s);return o?o.uri:null}function parseLinks(e,r,t,i,s){var o=[],n=e.statementsMatching(r,t,i,s);return n.forEach(function(e){o.push(e.object.uri)}),o}module.exports=SolidProfile;var rdf=require("./rdf-parser").rdflib,Vocab=require("./vocab"),identity=require("./identity"),graphUtil=require("./graph-util");SolidProfile.prototype.appendFromGraph=function(e,r){if(e){graphUtil.appendGraph(this.parsedGraph,e,r);var t,i=rdf.sym(this.webId);t=parseLinks(e,null,rdf.sym(Vocab.OWL.sameAs)),this.relatedProfiles.sameAs=this.relatedProfiles.sameAs.concat(t),t=parseLinks(e,null,rdf.sym(Vocab.RDFS.seeAlso)),this.relatedProfiles.seeAlso=this.relatedProfiles.seeAlso.concat(t),t=parseLinks(e,i,rdf.sym(Vocab.PIM.preferencesFile)),this.relatedProfiles.preferences=this.relatedProfiles.preferences.concat(t),this.externalResources.inbox||(this.externalResources.inbox=parseLink(e,i,rdf.sym(Vocab.SOLID.inbox))),t=parseLinks(e,i,rdf.sym(Vocab.PIM.storage)),this.externalResources.storage=this.externalResources.storage.concat(t),t=parseLinks(e,i,rdf.sym(Vocab.SOLID.typeIndex)),this.externalResources.typeIndexes=this.externalResources.typeIndexes.concat(t)}},SolidProfile.prototype.initWebId=function(e){if(e)try{this.webId=extractWebId(this.baseProfileUrl,e).uri}catch(r){throw new Error("Unable to parse WebID from profile")}},SolidProfile.prototype.relatedProfilesLinks=function(){return this.relatedProfiles.sameAs.concat(this.relatedProfiles.seeAlso).concat(this.relatedProfiles.preferences)},SolidProfile.prototype.inbox=function(){return this.externalResources.inbox},SolidProfile.prototype.preferences=function(){return this.relatedProfiles.preferences},SolidProfile.prototype.storage=function(){return this.externalResources.storage},SolidProfile.prototype.typeIndexes=function(){return this.externalResources.typeIndexes},SolidProfile.prototype.addTypeRegistry=function(e){if(identity.isPublicTypeIndex(e))graphUtil.appendGraph(this.typeIndexPublic,e,e.uri);else{if(!identity.isPrivateTypeIndex(e))throw new Error("Attempting to add an invalid type registry index");graphUtil.appendGraph(this.typeIndexPrivate,e,e.uri)}},SolidProfile.prototype.typeRegistryForClass=function(e){return{"public":this.typeIndexPublic.statementsMatching(null,null,e),"private":this.typeIndexPrivate.statementsMatching(null,null,e)}};
},{"./graph-util":3,"./identity":4,"./rdf-parser":6,"./vocab":10}],8:[function(require,module,exports){
"use strict";function SolidResponse(e,s){if(!e)return this.xhr=null,this.user="",void(this.method=null);var t=e.getResponseHeader("Link");this.linkHeaders=webUtil.parseLinkHeader(t)||{},s=s?s.toLowerCase():"",this.method=s,this.acl=this.linkHeaders.acl,this.allowedMethods=this.parseAllowedMethods(e,s),this.meta=this.linkHeaders.meta||this.linkHeaders.describedBy,this.type=this.linkHeaders.type,this.url=e.getResponseHeader("Location")||e.responseURL,this.user=e.getResponseHeader("User")||"",this.websocket=e.getResponseHeader("Updates-Via")||"",this.xhr=e}module.exports=SolidResponse;var webUtil=require("./web-util");SolidResponse.prototype.contentType=function(){return this.xhr?this.xhr.getResponseHeader("Content-Type"):null},SolidResponse.prototype.exists=function(){return this.xhr&&this.xhr.status>=200&&this.xhr.status<400},SolidResponse.prototype.isLoggedIn=function(){return this.user},SolidResponse.prototype.parseAllowedMethods=function(e,s){return"get"===s?{}:webUtil.parseAllowedMethods(e.getResponseHeader("Access-Control-Allow-Methods"),e.getResponseHeader("Accept-Patch"))},SolidResponse.prototype.raw=function(){return this.xhr?this.xhr.response:null};
},{"./web-util":12}],9:[function(require,module,exports){
"use strict";function isOnline(){return window.navigator.onLine}function onOffline(n){window.addEventListener("offline",n,!1)}function onOnline(n){window.addEventListener("online",n,!1)}module.exports.isOnline=isOnline,module.exports.onOffline=onOffline,module.exports.onOnline=onOnline;
},{}],10:[function(require,module,exports){
"use strict";var Vocab={DCT:"http://purl.org/dc/terms/",FOAF:{primaryTopic:"http://xmlns.com/foaf/0.1/primaryTopic"},LDP:{BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",NonRDFSource:"http://www.w3.org/ns/ldp#NonRDFSource",RDFSource:"http://www.w3.org/ns/ldp#RDFSource",Resource:"http://www.w3.org/ns/ldp#Resource"},OWL:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},PIM:{preferencesFile:"http://www.w3.org/ns/pim/space#preferencesFile",storage:"http://www.w3.org/ns/pim/space#storage"},RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:{seeAlso:"http://www.w3.org/2000/01/rdf-schema#seeAlso"},SOLID:{inbox:"http://www.w3.org/ns/solid/terms#inbox",typeIndex:"http://www.w3.org/ns/solid/terms#typeIndex",PrivateTypeIndex:"http://www.w3.org/ns/solid/terms#PrivateTypeIndex",PublicTypeIndex:"http://www.w3.org/ns/solid/terms#PublicTypeIndex",TypeRegistration:"http://www.w3.org/ns/solid/terms#TypeRegistration"},VCARD:{AddressBook:"http://www.w3.org/2006/vcard/ns#AddressBook"}};module.exports=Vocab;
},{}],11:[function(require,module,exports){
"use strict";var rdf=require("./rdf-parser").rdflib,rdflibWebClient={getParsedGraph:function(r,e,t,n){rdf.Fetcher.crossSiteProxyTemplate=e;var i=new Promise(function(e,i){var o=rdf.graph(),d=new rdf.Fetcher(o,t),s=r.indexOf("#")>=0?r.slice(0,r.indexOf("#")):r;d.nowOrWhenFetched(s,void 0,function(r,t,d){r?e(o):n?e(null):i({status:d.status,xhr:d})})},function(r){console.log("Error in getParsedGraph: %o",r)});return i}};module.exports=rdflibWebClient;
},{"./rdf-parser":6}],12:[function(require,module,exports){
"use strict";function parseAllowedMethods(e,t){var r={};if(e){var o=e.split(",");o.forEach(function(t){t&&e.indexOf(t)>=0&&(r[t.trim().toLowerCase()]=!0)})}return t&&t.indexOf("application/sparql-update")>=0&&(r.patch=!0),r}function parseLinkHeader(e){if(!e)return{};for(var t=/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,r=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,o=e.match(t),a={},n=0;n<o.length;n++)for(var s=o[n].split(">"),l=s[0].substring(1),i=s[1],p=i.match(r),c=0;c<p.length;c++){var h=p[c],u=h.split("="),d=u[1].replace(/["']/g,"");a[d]=l}return a}function composePatchQuery(e,t){var r,o="";if(e&&e.length>0)for(r=0;r<e.length;r++)r>0&&(o+=" ;\n"),o+="DELETE DATA { "+e[r]+" }";if(t&&t.length>0)for(r=0;r<t.length;r++)(r>0||e&&e.length>0)&&(o+=" ;\n"),o+="INSERT DATA { "+t[r]+" }";return o}module.exports.composePatchQuery=composePatchQuery,module.exports.parseAllowedMethods=parseAllowedMethods,module.exports.parseLinkHeader=parseLinkHeader;
},{}],13:[function(require,module,exports){
"use strict";var config=require("../config"),graphUtil=require("./graph-util"),SolidResponse=require("./solid-response"),Vocab=require("./vocab"),XMLHttpRequest=require("./xhr"),SolidWebClient={currentUrl:function(){return"undefined"!=typeof window?window.location.href:null},needsProxy:function(e){var t=this.currentUrl(),r=t&&"https:"===t.slice(0,6),i=e&&"http:"===e.slice(0,5);return!(!r||!i)},proxyUrl:function(e,t){return t=t||config.proxyUrl,t.replace("{uri}",encodeURIComponent(e))},solidRequest:function(e,t,r,i){return r=r||{},r.headers=r.headers||{},r.proxyUrl=r.proxyUrl||config.proxyUrl,r.timeout=r.timeout||config.timeout,(this.needsProxy(e)||r.forceProxy)&&(e=this.proxyUrl(e)),new Promise(function(n,o){var s=new XMLHttpRequest;s.open(t,e),s.withCredentials=!0;for(var u in r.headers)s.setRequestHeader(u,r.headers[u]);r.timeout&&(s.timeout=r.timeout),s.onload=function(){this.status>=200&&this.status<300?n(new SolidResponse(this,t)):o({status:this.status,statusText:this.statusText,xhr:this})},s.onerror=function(){o({status:this.status,statusText:this.statusText,xhr:this})},i?s.send(i):s.send()})},head:function(e){return this.solidRequest(e,"HEAD")},get:function(e,t){return this.solidRequest(e,"GET",t)},loadParsedGraphs:function(e,t){var r=this,i=e.map(function(e){return r.get(e,t).then(function(t){var r=t.contentType();return graphUtil.parseGraph(e,t.raw(),r)})["catch"](function(e){return null}).then(function(t){return{uri:e,value:t}})});return Promise.all(i)},options:function(e){return this.solidRequest(e,"OPTIONS")},getParsedGraph:function e(t,r,i,n){if(r=r||config.proxyUrl,i=i||config.timeout,"rdflib"!==config.parser)throw Error("Parser library not supported: "+config.parser);var e=require("./web-rdflib").getParsedGraph;return e(t,r,i,n)},post:function(e,t,r,i,n){var o;i?(o=Vocab.LDP.BasicContainer,n="text/turtle"):(o=Vocab.LDP.Resource,n=n||"text/turtle");var s={};return s.headers={},s.headers.Link="<"+o+'>; rel="type"',s.headers["Content-Type"]=n,r&&r.length>0&&(s.headers.Slug=r),this.solidRequest(e,"POST",s,t)},put:function(e,t,r){var i={};return i.headers={},i.headers["Content-Type"]=r,this.solidRequest(e,"PUT",i,t)},patch:function(e,t,r){var i=require("./web-util").composePatchQuery,n=i(t,r),o="application/sparql-update",s={};return s.headers={},s.headers["Content-Type"]=o,this.solidRequest(e,"PATCH",s,n)},del:function(e){return this.solidRequest(e,"DELETE")}};SolidWebClient.create=SolidWebClient.post,SolidWebClient.replace=SolidWebClient.put,SolidWebClient.update=SolidWebClient.patch,module.exports=SolidWebClient;
},{"../config":1,"./graph-util":3,"./solid-response":8,"./vocab":10,"./web-rdflib":11,"./web-util":12,"./xhr":14}],14:[function(require,module,exports){
"use strict";var XMLHttpRequest;XMLHttpRequest="undefined"!=typeof tabulator&&tabulator.isExtension?Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance().QueryInterface(Components.interfaces.nsIXMLHttpRequest):"undefined"!=typeof window&&"XMLHttpRequest"in window?window.XMLHttpRequest:require("xhr2"),module.exports=XMLHttpRequest;
},{"xhr2":undefined}],15:[function(require,module,exports){
module.exports={"name":"solid","version":"0.8.1","description":"Common library for writing Solid applications","main":"./index.js","scripts":{"build-browserified":"browserify -r ./index.js:solid --exclude 'xhr2' --exclude 'rdflib' > dist/solid.js","build-minified":"browserify -r ./index.js:solid --exclude 'xhr2' --exclude 'rdflib' -d -p [minifyify --no-map] > dist/solid.min.js","build":"npm run clean && npm run standard && npm run build-browserified && npm run build-minified","clean":"rm -rf dist/*","standard":"standard lib/*","tape":"tape test/unit/*.js","test":"npm run standard && npm run tape","qunit":"npm run standard && npm run build-browserified && open test/index.html"},"repository":{"type":"git","url":"https://github.com/solid/solid.js"},"keywords":["solid","decentralized","web","rdf","ldp","linked","data"],"author":"Andrei Sambra <andrei@fcns.eu>","license":"MIT","bugs":{"url":"https://github.com/solid/solid.js/issues"},"homepage":"https://github.com/solid/solid.js","dependencies":{"rdflib":"^0.3.2","xhr2":"^0.1.3"},"devDependencies":{"browserify":"^13.0.0","minifyify":"^7.2.1","standard":"^5.4.1","tape":"^4.4.0"},"standard":{"globals":["$rdf","tabulator","QUnit"]}}
},{}],"solid":[function(require,module,exports){
"use strict";var Solid={auth:require("./lib/auth"),config:require("./config"),identity:require("./lib/identity"),meta:require("./lib/meta"),status:require("./lib/status"),web:require("./lib/web"),webUtil:require("./lib/web-util")};module.exports=Solid;
},{"./config":1,"./lib/auth":2,"./lib/identity":4,"./lib/meta":5,"./lib/status":9,"./lib/web":13,"./lib/web-util":12}]},{},[])

