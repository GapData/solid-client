require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";module.exports={authEndpoint:"https://databox.me/",parser:"rdflib",proxyUrl:"https://databox.me/,proxy?uri={uri}",signupEndpoint:"https://solid.github.io/solid-idps/",signupWindowHeight:600,signupWindowWidth:1024,timeout:5e4};
},{}],2:[function(require,module,exports){
"use strict";function listen(){var n=new Promise(function(n,e){var i=window.addEventListener?"addEventListener":"attachEvent",t=window[i],o="attachEvent"===i?"onmessage":"message";t(o,function(i){var t=i.data;if("User:"===t.slice(0,5)){var o=t.slice(5,t.length);return o&&o.length>0&&"http"===o.slice(0,4)?n(o):e(o)}},!0)});return n}function login(n,e){var i=require("../config").authEndpoint;return n=n||window.location.origin+window.location.pathname,e=e||i,webClient.head(n).then(function(n){return n.isLoggedIn()?n.user:webClient.head(e).then(function(n){return n.user})})}function signup(n){var e=require("../config");n=n||e.signupEndpoint;var i=e.signupWindowWidth,t=e.signupWindowHeight,o=window.screen.width/2-(i/2+10),r=window.screen.height/2-(t/2+50),s="Solid signup",u=n+"?origin="+encodeURIComponent(window.location.origin),a="resizable,scrollbars,status,width="+i+",height="+t+",left="+o+",top="+r;return window.open(u,s,a),new Promise(function(n,e){listen().then(function(e){return n(e)})["catch"](function(n){return e(n)})})}var webClient=require("./web");module.exports.listen=listen,module.exports.login=login,module.exports.signup=signup;
},{"../config":1,"./web":10}],3:[function(require,module,exports){
"use strict";function appendGraph(e,r,t){var o=t?$rdf.sym(t):void 0;r.statementsMatching(void 0,void 0,void 0,o).forEach(function(r){e.add(r.subject,r.predicate,r.object,r.why)})}function extractWebId(e,r){return r.any($rdf.sym(e),FOAF("primaryTopic"))}function extractProfileResources(e,r,t){var o=[],n=[OWL("sameAs"),RDFS("seeAlso"),PIM("preferencesFile")];return n.forEach(function(n){var a=t.statementsMatching(e,n,void 0,$rdf.sym(r));a.length>0&&(o=o.concat(a))}),o}function loadGraphs(e,r,t){var o=!0,n=e.map(function(e){return solidClient.getParsedGraph(e.object.uri,r,t,o).then(function(r){return{uri:e.object.uri,value:r}})});return Promise.all(n)}function getProfile(e,r){var t=require("../config"),o=t.proxyUrl,n=t.timeout;return solidClient.getParsedGraph(e,o,n).then(function(t){if(r)return t;var a=e.indexOf("#")>=0?e.slice(0,e.indexOf("#")):e,i=extractWebId(a,t),c=extractProfileResources(i,a,t);return 0===c.length?t:loadGraphs(c,o,n).then(function(e){return e.forEach(function(e){e&&appendGraph(t,e.value,e.uri)}),t})})}var solidClient=require("./web"),RDFS=$rdf.Namespace("http://www.w3.org/2000/01/rdf-schema#"),OWL=$rdf.Namespace("http://www.w3.org/2002/07/owl#"),PIM=$rdf.Namespace("http://www.w3.org/ns/pim/space#"),FOAF=$rdf.Namespace("http://xmlns.com/foaf/0.1/");module.exports.getProfile=getProfile,module.exports.extractProfileResources=extractProfileResources;
},{"../config":1,"./web":10}],4:[function(require,module,exports){
"use strict";var lib=require("../package");module.exports.version=function(){return lib.version};
},{"../package":12}],5:[function(require,module,exports){
"use strict";function SolidResponse(e){return e?(this.linkHeaders=parseLinkHeader(e.getResponseHeader("Link"))||{},this.acl=this.linkHeaders.acl,this.allowedMethods=parseAllowedMethods(e.getResponseHeader("Allow"),e.getResponseHeader("Accept-Patch")),this.meta=this.linkHeaders.meta||this.linkHeaders.describedBy,this.type=this.linkHeaders.type,this.url=e.getResponseHeader("Location")||e.responseURL,this.user=e.getResponseHeader("User")||"",this.websocket=e.getResponseHeader("Updates-Via")||"",void(this.xhr=e)):(this.xhr=null,void(this.user=""))}var parseLinkHeader=require("./web-util").parseLinkHeader,parseAllowedMethods=require("./web-util").parseAllowedMethods;SolidResponse.prototype.exists=function(){return this.xhr&&this.xhr.status>=200&&this.xhr.status<400},SolidResponse.prototype.isLoggedIn=function(){return this.user},module.exports=SolidResponse;
},{"./web-util":9}],6:[function(require,module,exports){
"use strict";var isOnline=function(){return window.navigator.onLine},onOffline=function(n){window.addEventListener("offline",n,!1)},onOnline=function(n){window.addEventListener("online",n,!1)};module.exports.isOnline=isOnline,module.exports.onOffline=onOffline,module.exports.onOnline=onOnline;
},{}],7:[function(require,module,exports){
"use strict";var Vocab={LDP:{BasicContainer:"http://www.w3.org/ns/ldp#BasicContainer",NonRDFSource:"http://www.w3.org/ns/ldp#NonRDFSource",RDFSource:"http://www.w3.org/ns/ldp#RDFSource",Resource:"http://www.w3.org/ns/ldp#Resource"}};module.exports=Vocab;
},{}],8:[function(require,module,exports){
"use strict";var rdflibWebClient={getParsedGraph:function(e,r,t,n){$rdf.Fetcher.crossSiteProxyTemplate=r;var i=new Promise(function(r,i){var o=$rdf.graph(),s=new $rdf.Fetcher(o,t),d=e.indexOf("#")>=0?e.slice(0,e.indexOf("#")):e;s.nowOrWhenFetched(d,void 0,function(e,t,s){e?r(o):n?r(null):i({status:s.status,xhr:s})})},function(e){console.log("Error in getParsedGraph: %o",e)});return i}};module.exports=rdflibWebClient;
},{}],9:[function(require,module,exports){
"use strict";function parseAllowedMethods(e,t){var r={};if(e){var o=["HEAD","GET","POST","PUT","DELETE","OPTIONS"];o.forEach(function(t){e.indexOf(t)>=0&&(r[t]=!0)})}return t&&t.indexOf("application/sparql-update")>=0&&(this.allowedMethods.patch=!0),r}function parseLinkHeader(e){for(var t=/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g,r=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,o=e.match(t),a={},n=0;n<o.length;n++)for(var s=o[n].split(">"),l=s[0].substring(1),p=s[1],h=p.match(r),i=0;i<h.length;i++){var c=h[i],d=c.split("="),u=d[1].replace(/["']/g,"");a[u]=l}return a}function composePatchQuery(e,t){var r,o="";if(e&&e.length>0)for(r=0;r<e.length;r++)r>0&&(o+=" ;\n"),o+="DELETE DATA { "+e[r]+" }";if(t&&t.length>0)for(r=0;r<t.length;r++)(r>0||e&&e.length>0)&&(o+=" ;\n"),o+="INSERT DATA { "+t[r]+" }";return o}module.exports.composePatchQuery=composePatchQuery,module.exports.parseAllowedMethods=parseAllowedMethods,module.exports.parseLinkHeader=parseLinkHeader;
},{}],10:[function(require,module,exports){
"use strict";var config=require("../config"),SolidResponse=require("./solid-response"),Vocab=require("./vocab"),XMLHttpRequest=require("./xhr"),SolidWebClient={solidRequest:function(e,t,r,s){return r=r||{},r.headers=r.headers||{},r.proxyUrl=r.proxyUrl||config.proxyUrl,r.timeout=r.timeout||config.timeout,new Promise(function(i,o){var n=new XMLHttpRequest;n.open(t,e),n.withCredentials=!0;for(var u in r.headers)n.setRequestHeader(u,r.headers[u]);r.timeout&&(n.timeout=r.timeout),n.onload=function(){this.status>=200&&this.status<300?i(new SolidResponse(this)):o({status:this.status,statusText:this.statusText,xhr:this})},n.onerror=function(){o({status:this.status,statusText:this.statusText,xhr:this})},s?n.send(s):n.send()})},head:function(e){return this.solidRequest(e,"HEAD")},get:function(e,t,r){var s={proxyUrl:t,timeout:r};return this.solidRequest(e,"GET",s)},getParsedGraph:function e(t,r,s,i){if(r=r||config.proxyUrl,s=s||config.timeout,"rdflib"!==config.parser)throw Error("Parser library not supported: "+config.parser);var e=require("./web-rdflib").getParsedGraph;return e(t,r,s,i)},post:function(e,t,r,s,i){var o;s?(o=Vocab.LDP.BasicContainer,i="text/turtle"):(o=Vocab.LDP.Resource,i=i||"text/turtle");var n={};return n.headers={},n.headers.Link="<"+o+'>; rel="type"',n.headers["Content-Type"]=i,r&&r.length>0&&(n.headers.Slug=r),this.solidRequest(e,"POST",n,t)},put:function(e,t,r){var s={};return s.headers={},s.headers["Content-Type"]=r,this.solidRequest(e,"PUT",s,t)},patch:function(e,t,r){var s=require("./web-util").composePatchQuery,i=s(t,r),o="application/sparql-update",n={};return n.headers={},n.headers["Content-Type"]=o,this.solidRequest(e,"PATCH",n,i)},del:function(e){return this.solidRequest(e,"DELETE")}};SolidWebClient.create=SolidWebClient.post,SolidWebClient.replace=SolidWebClient.put,SolidWebClient.update=SolidWebClient.patch,module.exports=SolidWebClient;
},{"../config":1,"./solid-response":5,"./vocab":7,"./web-rdflib":8,"./web-util":9,"./xhr":11}],11:[function(require,module,exports){
"use strict";var XMLHttpRequest;XMLHttpRequest=void 0!==window&&"XMLHttpRequest"in window?window.XMLHttpRequest:require("xhr2"),module.exports=XMLHttpRequest;
},{"xhr2":undefined}],12:[function(require,module,exports){
module.exports={"name":"solid","version":"0.5.1","description":"Common library for writing Solid applications","main":"./index.js","scripts":{"build-browserified":"browserify -r ./index.js:solid --exclude 'xhr2' --exclude 'rdflib' > dist/solid.js","build-minified":"browserify -r ./index.js:solid --exclude 'xhr2' --exclude 'rdflib' -d -p [minifyify --no-map] > dist/solid.min.js","build":"npm run clean && npm run standard && npm run build-browserified && npm run build-minified","clean":"rm -rf dist/*","standard":"standard lib/*","tape":"tape test/unit/*.js","test":"npm run standard && npm run tape","qunit":"npm run standard && npm run build-browserified && open test/index.html"},"repository":{"type":"git","url":"https://github.com/solid/solid.js"},"keywords":["solid","decentralized","web","rdf","ldp","linked","data"],"author":"Andrei Sambra <andrei@fcns.eu>","license":"MIT","bugs":{"url":"https://github.com/solid/solid.js/issues"},"homepage":"https://github.com/solid/solid.js","dependencies":{"rdflib":"^0.3.2","xhr2":"^0.1.3"},"devDependencies":{"browserify":"^13.0.0","minifyify":"^7.2.1","sinon":"^1.17.3","standard":"^5.4.1","tape":"^4.4.0"},"standard":{"globals":["$rdf","tabulator","QUnit"]}}
},{}],"solid":[function(require,module,exports){
"use strict";var Solid={auth:require("./lib/auth"),config:require("./config"),identity:require("./lib/identity"),meta:require("./lib/meta"),status:require("./lib/status"),web:require("./lib/web"),webUtil:require("./lib/web-util")};module.exports=Solid;
},{"./config":1,"./lib/auth":2,"./lib/identity":3,"./lib/meta":4,"./lib/status":6,"./lib/web":10,"./lib/web-util":9}]},{},[])

